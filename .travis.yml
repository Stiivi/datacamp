language: ruby
cache: bundler
rvm:
- 1.9.3
services:
- mysql
- sphinx: '2.0.10'
before_script:
- cp config/database.travis.yml config/database.yml
- mysql -e 'create database datanest_app_test'
- mysql -e 'create database datanest_data_test'
- mysql -e 'create database datanest_staging_test'
- cp config/initializers/secret_token.rb.example config/initializers/secret_token.rb
- cp config/initializers/site_keys.rb.example config/initializers/site_keys.rb
- cp config/datacamp_config.yml.example config/datacamp_config.yml
- bundle exec rake db:schema:load
- bundle exec rake db_staging:schema:load
- bundle exec rake db_data:schema:load
script:
- bundle exec rspec spec/

addons:
  code_climate:
    repo_token:
      secure: Xk7kjiF7BcShFR0zsIAYTNVmY1l3KDineZhmSge11PBnxGdft48BBeziw+IKRgqX3ZTPw0yj95KJvAYRxpyZhSjKw9gFGCmKARtm7J2p1W2M8fy8FohAT77mi4Xnl/1Q3nPnbkUcYHv5wRgY8UrG2xXagCFoYJzf1W9x0JDwH5I=

